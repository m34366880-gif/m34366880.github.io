{% set page_title = 'NFT Gifts' %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ page_title }}</title>
  <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
  <header class="container">
    <h1>üéÅ NFT-–ø–æ–¥–∞—Ä–∫–∏</h1>
    <p class="muted">–í—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –≤ Telegram.</p>
  </header>

  <main class="container grid">
    <section>
      <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏</h2>
      <div class="cards">
        {% for g in gifts %}
        <div class="card">
          <div class="media">
            {% if g.telegram_file_id %}
            <video autoplay loop muted playsinline src="/media/telegram/{{ g.telegram_file_id }}"></video>
            {% elif g.gif_url %}
              {% if g.gif_url.endswith('.mp4') %}
                <video autoplay loop muted playsinline src="{{ g.gif_url }}"></video>
              {% else %}
                <img src="{{ g.gif_url }}" alt="{{ g.title }}" />
              {% endif %}
            {% else %}
              <div class="placeholder">–ù–µ—Ç –ø—Ä–µ–≤—å—é</div>
            {% endif %}
          </div>
          <div class="content">
            <h3>{{ g.title }}</h3>
            {% if g.description %}<p class="muted">{{ g.description }}</p>{% endif %}
            <form method="post" action="/send" class="row">
              <input type="hidden" name="gift_id" value="{{ g.id }}" />
              <input type="text" name="recipient" placeholder="–ü–æ–ª—É—á–∞—Ç–µ–ª—å (chat_id –∏–ª–∏ @username)" required />
              <input type="text" name="message" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
              <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
          </div>
        </div>
        {% else %}
        <p class="muted">–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤.</p>
        {% endfor %}
      </div>
    </section>

    <section>
      <h2>–ê–Ω–∏–º–∞—Ü–∏–∏ –∏–∑ Telegram</h2>
      <p class="muted">–≠—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω—ã –±–æ—Ç–æ–º –∏–∑ –≤–∞—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—é–±—É—é –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—ë –∫–∞–∫ –ø–æ–¥–∞—Ä–æ–∫.</p>
      <div class="cards">
        {% for m in medias %}
        <div class="card">
          <div class="media">
            {% if m.file_path %}
              <video autoplay loop muted playsinline src="/media/telegram/{{ m.file_id }}"></video>
            {% else %}
              <div class="placeholder">Telegram file_id: {{ m.file_id }}</div>
            {% endif %}
          </div>
          <div class="content">
            <form method="post" action="/send" class="row">
              <input type="hidden" name="direct_animation_url" value="{% if m.file_path %}/media/telegram/{{ m.file_id }}{% endif %}" />
              <input type="hidden" name="direct_file_id" value="{{ m.file_id }}" />
              <input type="text" name="recipient" placeholder="–ü–æ–ª—É—á–∞—Ç–µ–ª—å (chat_id –∏–ª–∏ @username)" required />
              <input type="text" name="message" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
              <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
          </div>
        </div>
        {% else %}
        <p class="muted">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É GIF/–∞–Ω–∏–º–∞—Ü–∏—é –∏ –∞–¥–º–∏–Ω –æ–±–Ω–æ–≤–∏—Ç —Å–ø–∏—Å–æ–∫.</p>
        {% endfor %}
      </div>
    </section>
  </main>

  <footer class="container muted small">
    <p>–°–µ—Ä–≤–µ—Ä –Ω–∞ FastAPI. –°—Ç–∞—Ç–∏–∫–∞ –∏ —à–∞–±–ª–æ–Ω—ã ‚Äî OK.</p>
  </footer>
</body>
</html>
